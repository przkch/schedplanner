---
import HTMLInput from "@components/form/HTMLInput.svelte";

interface Props {
  year: number;
  month: number;
}

const { year, month } = Astro.props;
---

<HTMLInput name="month" type="month" value=`${year}-${String(month).padStart(2, "0")}` class="flex flex-row items-center" />

<script>
  const month_input_element = document.querySelector("input[name='month']") as HTMLInputElement;

  month_input_element.addEventListener("change", (e) => {
    const target = e.target as HTMLInputElement;
    const [year, month] = target.value.split("-");
    document.cookie = `year=${year}; expires=Session, path=/`;
    document.cookie = `month=${month}; expires=Session, path=/`;
    location.reload();
  });
</script>
